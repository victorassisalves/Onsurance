"use strict";$(document).ready(function(){$("#phone").mask("(00) 00000-0000",{placeholder:"(00) 00000-0000"}),$("#zipCode").mask("00000-000",{placeholder:"00000-000"});const e=document.querySelectorAll(".form-step");new Vue({el:"#formApp",data:{step:0,maxStep:e.length-1,activeAlerta:!1,message:"",currentYear:(new Date).getFullYear()+1,vehicleType:"",usageType:"",appDriver:[""],appDriverOther:"",motoCc:"",truckTrunk:"",truckTrunkValue:"",brand:"",model:"",vehicleAge:"",factory:"",fipe:"",activeInsurance:"",insuranceValue:"",insuranceCompany:"",insuranceExpiration:"",garageHome:"",garageWork:"",hoursUsedDaily:"1",onsuranceOnboard:"",ass24h:"",thirdPartyCoverage:30,firstName:"",lastName:"",email:"",phone:"",country:"",state:"",city:"",zipCode:"",finalValue:{}},methods:{addAppDriver(){this.appDriver[0]=this.appDriverOther},formatPrice:e=>(e/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),validVehicleUsage(){"x"!==this.vehicleType&&(this.usageType="",this.usageTypeApp=[],this.nameApp="",this.appDriver=[""])},nextStep(){if(0===this.step){if(!this.validationStep1())return!1}else if(1===this.step){if(!this.validationStep2())return!1}else if(2===this.step&&!this.validationStep3())return!1;this.advanceStep(),location.href="#form"},prevStep(){this.step>0&&setTimeout(()=>{this.step--},300)},advanceStep(){setTimeout(()=>{this.step++},300)},send(){if(3===this.step&&!this.validationStep4())return!1;var e=this;axios.post("https://api.onsurance.me/quote/auto",{vehicleType:this.vehicleType,usageType:this.usageType,appDriver:this.appDriver,motoCc:this.motoCc,truckTrunk:this.truckTrunk,truckTrunkValue:this.truckTrunkValue,brand:this.brand,model:this.model,vehicleAge:this.vehicleAge,factory:this.factory,fipe:this.fipe,activeInsurance:this.activeInsurance,insuranceValue:this.insuranceValue,insuranceCompany:this.insuranceCompany,insuranceExpiration:this.insuranceExpiration,garageHome:this.garageHome,garageWork:this.garageWork,hoursUsedDaily:this.hoursUsedDaily,ass24h:this.ass24h,thirdPartyCoverage:this.thirdPartyCoverage,firstName:this.firstName,lastName:this.lastName,email:this.email,phone:this.phone,country:this.country,state:this.state,city:this.city,zipCode:this.zipCode}).then(function(t){console.log(t.data),e.finalValue=t.data,e.advanceStep(),location.href="#form"})},validationStep1(){if(!this.vehicleType)return this.alert("O tipo de veículo não foi selecionado"),!1;if("carro"==this.vehicleType){if(!this.usageType)return this.alert("Você não marcou o uso do carro"),!1;if("utilitario"==this.usageType){if(0==this.appDriver.length)return this.alert("Escolha os aplicativos que você trabalha"),!1;if(this.appDriver.includes("outros")&&!this.otherNameApp)return this.alert("Você não preencheu o nome do aplicativo"),!1}}else if("moto"==this.vehicleType){if(!this.motoCc)return this.alert("Você não marcou a potência da moto"),!1}else if("caminhonete"==this.vehicleType){if(!this.usageType)return this.alert("Você não marcou o uso da caminhonete"),!1}else if("vuc"==this.vehicleType){if(!this.truckTrunk)return this.alert("Você não marcou se deseja incluir o baú"),!1;if("Sim"==this.truckTrunk&&!this.truckTrunkValue)return this.alert("Você não colocou o valor do baú"),!1}if(!this.brand)return this.alert("A marca do veículo não foi preenchida"),!1;if(!this.model)return this.alert("O modelo do veículo não foi preenchida"),!1;if(!this.vehicleAge)return this.alert("O ano do veículo não foi preenchido"),!1;const e=document.querySelector("#vehicleAge");if(e.value<1996||e.value>this.currentYear)return e.classList.add("bg-danger"),setTimeout(()=>{e.classList.remove("bg-danger")},1e3),!1;if(!this.factory)return this.alert("A fabricação do veículo não foi selecionado"),!1;if(!this.fipe)return this.alert("O valor do veículo não foi preenchido"),!1;const t=document.querySelector("#insuranceValue"),i=document.querySelector("#insuranceCompany"),a=document.querySelector("#insuranceExpiration");if(!this.activeInsurance)return this.alert("Você não marcou se tem seguro"),!1;if("sim"===this.activeInsurance){if(!t.value)return this.alert("Você não colocou o valor do seguro"),!1;if(!i.value)return this.alert("Você não colocou o nome da última companhia de seguro"),!1;if(!a.value)return this.alert("Você não colocou a data de vencimento do seguro"),!1}return!0},validationStep2(){return this.garageHome?this.garageWork?this.onsuranceOnboard?!!this.hoursUsedDaily||(this.alert("Você tem que colocar algum valor nas horas diárias"),!1):(this.alert("Marque a opção"),!1):(this.alert("Você não selecionou se tem garagem no trabalho"),!1):(this.alert("Você não selecionou se tem garagem em casa"),!1)},validationStep3(){return!!this.ass24h||(this.alert("Você tem que selecionar se quer assistência 24h"),!1)},validationStep4(){return this.firstName?this.lastName?this.email?this.phone?!!this.zipCode||(this.alert("Coloque o seu cep"),!1):(this.alert("Coloque seu telefone"),!1):(this.alert("Coloque seu e-mail"),!1):(this.alert("Coloque seu sobrenome"),!1):(this.alert("Coloque o seu nome"),!1)},alert(e){this.activeAlerta=!0,this.message=e,setTimeout(()=>{this.activeAlerta=!1},2e3)},isValueNumber:function(e){if(e.target.value<1996||e.target.value>this.currentYear)return e.target.classList.add("is-invalid"),e.target.nextElementSibling.classList.remove("text-muted"),e.target.nextElementSibling.classList.add("text-danger"),!1;e.target.classList.remove("is-invalid"),e.target.nextElementSibling.classList.add("text-muted"),e.target.nextElementSibling.classList.remove("text-danger")},hoursUsedDailyVerify(e){(e.target.value>24||e.target.value<0||e.target.value%1!=0)&&(this.hoursUsedDaily="")},yearVerify(e){(e.target.value.length>4||e.target.value%1!=0)&&(this.vehicleAge="")}}})});